import collections
def isValidSudoku(board):
    rows = collections.defaultdict(set)
    cols = collections.defaultdict(set)
    squares = collections.defaultdict(set)

    for r in range(9):
        for c in range(9):
            if board[r][c] == ".":
                continue
            if (board[r][c] in rows[r] or 
                board[r][c] in cols[c] or 
                board[r][c] in squares[(r//3,c//3)]):
                return False
            cols[c].add(board[r][c])
            rows[r].add(board[r][c])
            squares[(r//3,c//3)].add(board[r][c])
    
    return True

"""
at the end the rows will be like this :
{0: {'7', '3', '5'}, 1: {'9', '1', '5', '6'}, 2: {'9', '8', '6'}, 3: {'3', '8', '6'}, 4: {'3', '1', '4', '8'}, 5: {'7', '2', '6'}, 6: {'2', '8', '6'}, 7: {'9', '1', '4', '5'}, 8: {'7', '9', '8'}})

the cols :
{0: {'6', '8', '4', '5', '7'}, 1: {'6', '9', '3'}, 4: {'6', '8', '9', '1', '7', '2'}, 3: {'1', '4', '8'}, 5: {'9', '5', '3'}, 2: {'8'}, 7: {'6', '8', '7'}, 8: {'6', '3', '9', '5', '1'}, 6: {'2'}})

the squares
{(0, 0): {'5', '9', '8', '3', '6'}, (0, 1): {'5', '9', '7', '1'}, (0, 2): {'6'}, (1, 0): {'7', '8', '4'}, (1, 1): {'2', '8', '3', '6'}, (1, 2): {'3', '1', '6'}, (2, 0): {'6'}, (2, 2): {'2', '5', '9', '7', '8'}, (2, 1): {'9', '8', '1', '4'}})

"""

        
    



print(isValidSudoku([["5","3",".",".","7",".",".",".","."]
                    ,["6",".",".","1","9","5",".",".","."]
                    ,[".","9","8",".",".",".",".","6","."]
                    ,["8",".",".",".","6",".",".",".","3"]
                    ,["4",".",".","8",".","3",".",".","1"]
                    ,["7",".",".",".","2",".",".",".","6"]
                    ,[".","6",".",".",".",".","2","8","."]
                    ,[".",".",".","4","1","9",".",".","5"]
                    ,[".",".",".",".","8",".",".","7","9"]]))